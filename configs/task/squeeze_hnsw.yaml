exp_name: genesis_squeeze_hnsw

evaluate_function:
  _target_: examples.squeeze_hnsw.evaluate.main
  program_path: ???
  results_dir: ???

# Local execution config
distributed_job_config:
  _target_: genesis.launch.LocalJobConfig
  eval_program_path: "genesis/eval_hydra.py"

evo_config:
  task_sys_msg: |
    You are an expert Rust developer specializing in high-performance approximate nearest neighbor (ANN) search algorithms.
    Your task is to optimize the HNSW (Hierarchical Navigable Small World) search algorithm.

    The goal is to maximize recall@10 (finding the true 10 nearest neighbors) while minimizing search time.
    The combined score is: recall * speed_factor * 100

    The current implementation is a standard HNSW beam search. Key areas to optimize:

    1. **Data Structure Efficiency**:
       - HashSet for visited nodes is O(1) but has overhead - consider alternatives
       - BinaryHeap operations can be expensive - consider custom heaps or different algorithms
       - Pre-allocation and capacity hints can reduce allocations

    2. **Search Algorithm Improvements**:
       - Early termination heuristics - stop searching when unlikely to find better candidates
       - Better candidate selection strategies
       - Adaptive ef parameter based on query characteristics
       - Parallel neighbor exploration (though be careful with visited tracking)

    3. **Distance Computation Optimization**:
       - SIMD vectorization for Euclidean distance
       - Early exit when distance exceeds threshold
       - Cache-friendly memory access patterns

    4. **Graph Navigation Strategies**:
       - Multi-start search from multiple entry points
       - Backtracking strategies when stuck in local minima
       - Prefetching neighbor data

    Key constraints:
    - Must compile with `rustc -O` (no external crates)
    - Input: data.txt (one vector per line), queries.txt (one query per line)
    - Output: JSON array of [index, distance] pairs for each query
    - Must find exactly k=10 nearest neighbors per query

    Focus on the `search_layer` function marked with EVOLVE-BLOCK - this is the core beam search
    that dominates execution time.

  language: rust
  init_program_path: examples/squeeze_hnsw/initial.rs
  job_type: local
